<div class="h-screen flex bg-gray-100">
  <!-- Sidebar for Past Topics -->
  <aside class="w-64 bg-white shadow-md p-4 overflow-y-auto">
    <h2 class="text-xl font-semibold mb-4">Past Topics</h2>
    <ul class="space-y-2 text-sm">
      @for (topic of topicList; track topic) {
        <li 
          class="p-2 rounded cursor-pointer hover:bg-gray-200" 
          [class.bg-gray-200]="topic === selectedTopic" 
          (click)="loadChat(topic)">
          {{ topic }}
        </li>
      }
    </ul>
  </aside>

  <!-- Chat Section -->
  <main class="flex-1 flex flex-col">
    <!-- Chat Title Bar -->
    <header class="p-4 bg-white shadow flex items-center justify-between">
      <h1 class="text-xl font-semibold">AI Real Estate Assistant</h1>
      <span class="text-sm text-gray-500">Active</span>
    </header>

    <!-- Chat Messages -->
    <section class="flex-1 p-4 overflow-y-auto space-y-4">
      @if ((chatHistory?.length || 0) > 0) {
        @for (msg of chatHistory; track msg) {
          <div [class]="'flex ' + (msg.from === 'user' ? 'justify-end' : 'justify-start')">
            <div [class]="'p-3 rounded shadow max-w-sm ' + (msg.from === 'user' ? 'bg-white text-black' : 'bg-blue-500 text-white')">
              {{ msg.text }}
            </div>
          </div>
        }
      } @else {
        <p class="text-gray-400 text-sm text-center mt-10">No messages available for this topic.</p>
      }
    </section>

    <!-- Chat Input Box -->
    <footer class="p-4 bg-white border-t border-gray-200 flex items-center space-x-2">
      <input 
        type="text" 
        [(ngModel)]="newMessage" 
        (keyup.enter)="sendMessage()" 
        placeholder="Ask about real estate..." 
        class="flex-1 border border-gray-300 rounded p-2 focus:outline-none focus:ring-2 focus:ring-blue-400" />
      <button 
        (click)="sendMessage()" 
        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
        Send
      </button>
    </footer>
  </main>
</div>
